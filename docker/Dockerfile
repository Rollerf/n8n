FROM n8nio/n8n

ENV N8N_HOST=0.0.0.0
ENV N8N_PORT=5678
ENV N8N_PROTOCOL=http
ENV N8N_API_BASE_URL=http://localhost:5678/rest
ENV N8N_PUBLIC_API_BASE_URL=http://localhost:5678/public
ENV N8N_EDITOR_BASE_URL=http://localhost:5678/editor
ENV DB_TYPE=postgresdb
ENV DB_POSTGRESDB_HOST=db
ENV DB_POSTGRESDB_PORT=5432
ENV DB_POSTGRESDB_DATABASE=n8n
ARG DB_POSTGRESDB_USER
ARG DB_POSTGRESDB_PASSWORD
ENV DB_POSTGRESDB_USER=${DB_POSTGRESDB_USER}
ENV DB_POSTGRESDB_PASSWORD=${DB_POSTGRESDB_PASSWORD}

EXPOSE 5678

CMD ["n8n", "start"]
